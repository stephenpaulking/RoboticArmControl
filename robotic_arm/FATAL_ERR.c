/*==========================================================================*
 * C OBJECT OPERATION                                                       *
 *--------------------------------------------------------------------------*
 *                                                                          *
 * Object   : FATAL_ERROR.c                                                 *
 *                                                                          *
 * Purpose  : FATAL_ERROR file for robotic arm project                      *
 *                                                                          *
 *--------------------------------------------------------------------------*
 * Copyright 2013 University of the West of England                         *
 *--------------------------------------------------------------------------*
 *                                                                          *
 * Status   : WRITTEN                                                       *
 *                                                                          *
 * Author   : Stephen King                                                  *
 *                                                                          *
 * Team:    : Stephen King, Jack Bennett, Steven Mann & Diyana Shakur       *
 *                                                                          *
 *==========================================================================*/

/*--------------------------------------------------------------------------*
 * System Wide Header Files :-                                              *
 *--------------------------------------------------------------------------*/

#include <stdbool.h>
#include <unistd.h>
#include <stdio.h> 
#include "sys/alt_stdio.h"
#include "system.h"
#include "altera_avalon_pio_regs.h"
#include "alt_types.h"

/*--------------------------------------------------------------------------*
 * Object Header Files :-                                                   *
 *--------------------------------------------------------------------------*/
  
#include "RAP.h"
#include "FATAL_ERR.h"
#include "LCD.h"
#include "SEV_SEG.h"
  
/*--------------------------------------------------------------------------*
 * Private Data Types and Constants :-                                      *
 *--------------------------------------------------------------------------*/
  
/* None */ 
 
/*--------------------------------------------------------------------------*
 * Private Data Items :-                                                    *
 *--------------------------------------------------------------------------*/
  
 /* None */ 
 
/*--------------------------------------------------------------------------*
 * Operation Code :-                                                        *
 *--------------------------------------------------------------------------*/
  
void fatal_error ( void )
{
    LCD__Write("Fatal Error\nShutdown in 30s");
    usleep(2000);
    SEV_SEG__Write("ERR0");
    usleep(30000000);
    while(1)
    {
        //Do Nothing Forever
    }
    return;
}
